{% extends "BoutiqueApp/index.html" %}
{% block content %}
    <!-- Encabezado -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-pink fw-bold">Lista de Citas</h2>
        <a href="{% url 'crear_cita' %}" class="btn btn-listar">Agregar Cita</a>
    </div>

    <!-- BÃºsqueda -->
    <form method="GET" action="{% url 'listar_citas' %}" class="d-flex mb-4 gap-2">
        <input type="text" name="buscar" class="form-control form-control-sm" placeholder="Buscar por nombre..." value="{{ request.GET.buscar }}">
        <button type="submit" class="btn btn-pink btn-sm">Buscar</button>
    </form>
    <div class="table-responsive shadow-sm rounded">
    <table class="table table-striped table-bordered align-middle table-sm text-center" style="table-layout: auto; width: 100%; ">
        <thead class="table-dark">
            <tr>
                <th>Cliente</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Medidas</th>
                <th>Moneda</th>
                <th>Precio</th>
                <th>Abono</th>
                <th>Pago Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
    <tbody>
        {% for cita in citas %}
            <tr>
                <td>{{ cita.cliente }}</td>
                <td>{{ cita.fecha }}</td>
                <td>{{ cita.hora }}</td>
                <td>{{ cita.medidas }}</td>
                <td>{{ cita.get_moneda_display }}</td>
                <td>{{ cita.precio }}</td>
                <td>{{ cita.abono }}</td>
                <td>{{ cita.pago_total }}</td>
                <td class="acciones-cell">
                    <a href="{% url 'ver_cita' cita.pk %}" class="btn btn-ver btn-sm">Ver</a>
                    <a href="{% url 'editar_cita' cita.pk %}" class="btn btn-editar btn-sm">Editar</a>
                    <form action="{% url 'eliminar_cita' cita.pk %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-eliminar btn-sm">Eliminar</button>
                    </form>
                </td>
            </tr>
        {% empty %}
        <tr>
            <td colspan="9" class="text-center">No hay citas agendadas</td></tr>
        {% endfor %}
    </tbody>
    </table>
    </div>
{% endblock %}
